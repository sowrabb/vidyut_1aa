#!/bin/bash
# Pre-commit hook for Vidyut project
# Runs analyzer and basic checks before allowing commit

set -e

echo "ğŸ” Running pre-commit checks..."

# Run Flutter analyzer
echo "ğŸ“Š Running flutter analyze..."
if ! flutter analyze; then
    echo "âŒ Flutter analyze found issues. Please fix them before committing."
    exit 1
fi

# Check for TODOs in committed files (warning only)
echo "ğŸ“ Checking for TODOs..."
git diff --cached --name-only | while read file; do
    if [ -f "$file" ]; then
        if grep -n "TODO" "$file" > /dev/null 2>&1; then
            echo "âš ï¸  Warning: $file contains TODO comments"
        fi
    fi
done

# Check for debug prints
echo "ğŸ› Checking for debug prints..."
if git diff --cached | grep -E "^\+.*print\(|^\+.*debugPrint\(" > /dev/null 2>&1; then
    echo "âš ï¸  Warning: Found print/debugPrint statements in staged changes"
fi

echo "âœ… Pre-commit checks passed!"
exit 0




